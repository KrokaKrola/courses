<!doctype html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>5</title>
    <link rel="stylesheet" href="css//bootstrap.min.css">
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <link href="css/styles.css" rel="stylesheet">
    <script src="js/vue.js"></script>
</head>

<body>
    <div class="wrapper">
        <div class="sample">
            <form action="#" v-show="!resultTable">
                <div class="progress">
                    <div class="progress-bar" role="progressbar" :style="getProgress" aria-valuemin="0"
                        aria-valuemax="100">
                    </div>
                </div>
                <div class="form-group" v-for="(item, index) in info">
                    <label>{{item.name}}</label>
                    <!-- 
                    error - fa-exclamation-circle
                    success - fa-check-circle 
                    -->
                    <i class="fa" :class="item.classList"></i>
                    <input type=" text" class="form-control" v-model="item.value"
                        @keyup="fieldValidate(index, $event.target)">
                </div>
                <button type="submit" @click.prevent="validateForm" class="btn btn-primary">Submit data</button>
            </form>
            <table class="table table-bordered" v-show="resultTable">
                <tr v-for="item in info">
                    <td>{{item.name}}</td>
                    <td>{{item.value}}</td>
                </tr>
            </table>
        </div>
    </div>
    </div>
    <script>
        let test = new Vue({
            el: ".sample",
            data: {
                progress: 0,
                resultTable: false,
                info: [
                    {
                        name: "Name",
                        value: "",
                        pattern: /^[a-zA-Z ]{2,30}$/,
                        classList: ""
                    },
                    {
                        name: "Phone",
                        value: "",
                        pattern: /^[0-9]{7,14}$/,
                        classList: ""
                    },
                    {
                        name: "Email",
                        value: "",
                        pattern: /.+/,
                        classList: ""
                    },
                    {
                        name: "Some Field 1",
                        value: "",
                        pattern: /.+/,
                        classList: ""
                    },
                    {
                        name: "Some Field 2",
                        value: "",
                        pattern: /.+/,
                        classList: ""
                    }
                ]
            },
            computed: {
                getProgress() {
                    return `width: ${this.progress}%`;
                }
            },
            methods: {
                fieldValidate(i, e) {
                    let currentPattern = this.info[i].pattern;
                    if (currentPattern.test(e.value)) {

                        if (this.info[i].classList === "fa-check-circle") {
                            return false;
                        } else {
                            this.progress += 100 / this.info.length;
                            this.info[i].classList = "fa-check-circle";
                        }

                    } else {
                        this.info[i].classList = "fa-exclamation-circle";
                    }
                },
                validateForm() {
                    if (this.progress >= 100)
                        this.resultTable = !this.resultTable;
                }
            }
        });

    </script>
</body>

</html>